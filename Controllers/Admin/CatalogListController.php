<?phpnamespace SHWPortfolioCatalog\Controllers\Admin;use SHWPortfolioCatalog\Helpers\View;use SHWPortfolioCatalog\Models\Catalog;class CatalogListController{	private $options;	public function __construct()	{		$this->loadPage();	}	public function loadPage()	{		View::render('admin/header-banner.php', ["key"]);		if (!isset($_GET['task']))		{			View::render('admin/catalogs/catalog-list.php');		} else {			$task = $_GET['task'];			if (isset($_POST['updateData'])) {				$id = absint($_GET['id']);				$productId = absint($_REQUEST['shwimage_images_id']);				$catalog = new Catalog(array('id' => $id));				$catalog->updateImage($_REQUEST, $productId);				$attributesValue = isset($_REQUEST['attributesValue']) ? $_REQUEST['attributesValue'] : null;				$attributesName = isset($_REQUEST['attributesName']) ? $_REQUEST['attributesName'] : null;				$categoriesName = isset($_REQUEST['checkboxTwoInput']) ? $_REQUEST['checkboxTwoInput'] : null;				$catalog->updateCatalogProductAtrributes($productId, $attributesValue, $attributesName);				$catalog->updateCatalogProductCategories($productId, $categoriesName);			} else if (isset($_POST['quickUpdateSave'])) {				$id = absint($_GET['id']);				$catalog = new Catalog(array('id' => $id));				$productIds = $_REQUEST['productIds'];				foreach ($productIds as $value) {					$image = $value;					$productTitle = sanitize_text_field($_REQUEST['productTitle'][$image]);					$productDescription = sanitize_text_field($_REQUEST['productDescription'][$image]);					$productPrice = sanitize_text_field($_REQUEST['productPrice'][$image]);					$discountPrice = sanitize_text_field($_REQUEST['discountPrice'][$image]) ;					$visible = isset($_REQUEST['selectorCondition'][$image]) ? 1 : 0;					$allData = array(						'productTitle'=>$productTitle,						'productDescription'=>$productDescription,						'productPrice'=>$productPrice,						'discountPrice'=>$discountPrice,						'visible' => $visible					);					$catalog->updateImage($allData, $value);				}			}			switch ($task) {				case 'edit_catalog':					if (!isset($_GET['id'])) {						\SHWPortfolioCatalog()->admin->printError(__('Missing "id" parameter.', SHWPORTFOLIOCATALOG_TEXT_DOMAIN));					}					$id = absint($_GET['id']);					if (!$id) {						\SHWPortfolioCatalog()->admin->printError(__('"id" parameter must be not negative integer.', SHWPORTFOLIOCATALOG_TEXT_DOMAIN));					}					$catalog = new Catalog(array('id' => $id));					View::render('admin/catalogs/edit-catalog.php', array('catalog' => $catalog));					break;				case 'duplicate_catalog':					$id = absint($_GET['id']);					$catalog = new Catalog(array('id' => $id));					$catalog = $catalog->saveDuplicate();					View::render('admin/catalogs/catalog-list.php', array('catalog' => $catalog));					break;				case 'remove_catalog':					$id = absint($_GET['id']);					$catalog = new Catalog(array('id' => $id));					$catalog = $catalog->removeCatalog();					View::render('admin/catalogs/catalog-list.php', array('catalog' => $catalog));					break;			}		}	}}