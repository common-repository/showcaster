<?phpnamespace SHWPortfolioCatalog\Controllers\Admin;use SHWPortfolioCatalog\Helpers\View;use SHWPortfolioCatalog\Models\Category;class CategoriesController{	public function __construct()	{		$this->loadCategories();	}	public function loadCategories()	{		View::render('/admin/header-banner.php');		if (isset($_POST['doaction']) || isset($_POST['doaction1'])) {			$action = $_REQUEST["action"];			$action1 =  $_REQUEST["action1"];			if ($action == "delete" || $action1=="delete") {				$delete_tags = isset($_REQUEST["delete_tags"]) ?  $_REQUEST["delete_tags"] : null;				if (isset($delete_tags)) {					foreach ($delete_tags as $value) {						$category = new Category(array('id' => $value));						$category->deleteCategory($value);					}				}			}		}		if (!isset($_GET['task'])) {			View::render('admin/categories/categories.php');		} else {			$task = sanitize_text_field($_GET['task']);			if (isset($_POST['updateCategory'])) {				$id = absint($_GET['id']);				$title = $_REQUEST['editCategoryTitle'];				$slug = $_REQUEST['editCategorySlug'];				$parent = $_REQUEST['editCategoryParent'];				$description = $_REQUEST['editCategoryDescription'];				$category = new Category(array('id' => $id));				$allData = array(					'title'=>$title,					'slug'=>$slug,					'parent'=>$parent,					'description'=>$description,				);				$u = $category->updateCategory($allData, $id);				if($u) {					$location = admin_url('admin.php?page=shwcategories');					$location = html_entity_decode( $location );					header( 'Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0' );					header( "Location: $location" );					exit();				}			}			switch ($task) {				case 'edit_category':					if (!isset($_GET['id'])) {						\SHWPortfolioCatalog()->admin->printError(__('Missing "id" parameter.', SHWPORTFOLIOCATALOG_TEXT_DOMAIN));					}					$id = absint($_GET['id']);					if (!$id) {						\SHWPortfolioCatalog()->admin->printError(__('"id" parameter must be not negative integer.', SHWPORTFOLIOCATALOG_TEXT_DOMAIN));					}					$category = new Category(array('id' => $id));					View::render('admin/categories/edit_category.php', array('category' => $category));					break;				case 'delete_category':					$id = $_GET['id'];					$category = new Category(array('id' => $id));					$category->deleteCategory($id);					View::render('admin/categories/categories.php', array('category' => $category));					break;			}		}	}}